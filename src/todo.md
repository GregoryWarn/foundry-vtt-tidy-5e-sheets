## To Do


- [ ] Fix: Weightless container (Bag of Devouring) shows undefined in the Holds text
- [ ] Sorting: Resolve todo - // TODO: This needs to be part of the sort group model, relating sort methods to specific groups.
- [ ] Inventory: subtables have a different set of styles for their header
- [ ] Inventory: Container inline capacity UI
- [ ] Inventory: Inline container Empty styles
- [ ] Container: Image click behaviors
  - [ ] Locked - Show preview
  - [ ] Unlocked - File Picker
- [ ] Review Container sheet to ensure it has everything
- [x] (Hightouch) Complete dark mode for the container
- [ ] Set up default/light/dark menu toggle and add to container
- [ ] Update sheet lock to work like the default sheets, including the additional render options and intuitive default state
- [ ] Item cards?
- [ ] Implement sheet header contents
  - [ ] Background
    - [ ] subtitle
  - [ ] Class
    - [ ] subtitle
  - [ ] Consumable
    - [ ] subtitle
      - [ ] Item Type
      - [ ] Item Subtype
    - [ ] summary
      - [ ] (when available) Charges
      - [ ] (when relevant) Cooldown
      - [ ] Price
      - [ ] Weight
      - [ ] Quantity
  - [x] Container
  - [ ] Equipment
    - [ ] subtitle
      - [ ] Type (Light Armor)
      - [ ] ## AC
    - [ ] summary
      - [ ] (when available) Charges
      - [ ] (when relevant) Cooldown
      - [ ] Price
      - [ ] Weight
      - [ ] Quantity
  - [ ] Facility
    - [ ] subtitle?
    - [ ] summary
      - [ ] Category
      - [ ] Type
      - [ ] Size
  - [ ] Feat
    - [ ] subtitle
      - [ ] (When active) Activation Type (Action)
      - [ ] (When Active) Requirements (Paladin 2)
      - [ ] (When Passive)
    - [ ] summary 
      - [ ] (when available) Charges
      - [ ] (when relevant) Cooldown
  - [ ] Loot
    - [ ] Subtitle
      - [ ] Loot type
      - [ ] (if available) Loot subtype
    - [ ] summary
      - [ ] Price
      - [ ] Weight
      - [ ] Quantity
  - [ ] Species
  - [ ] Spell
    - [ ] subtitle
      - [ ] Level (1st Level)
      - [ ] School
    - [ ] summary
      - [ ] (when available) Charges
      - [ ] (when relevant) Cooldown
      - [ ] charges
      - [ ] linked item (Necklace of Fireballs)
    - [ ] School Image across from title / subtitle
  - [ ] Subclass
    - [ ] subtitle
  - [ ] Tool
    - [ ] subtitle
    - [ ] summary
      - [ ] (when available) Charges
      - [ ] (when relevant) Cooldown
      - [ ] Charges
      - [ ] Price
      - [ ] Weight
      - [ ] Quantity
  - [ ] Weapon
    - [x] subtitle
    - [ ] Summary
      - [x] (when available) Charges
      - [x] (when relevant) Cooldown
      - [x] Price
      - [x] Weight
      - [x] Quantity
- [ ] Implement Activities tab
- [ ] Implement Effects tab
- [ ] Finish implementing container contents tab
- [ ] Implement Advancement tab
- [ ] Implement sidebar contents - prefer context data for pill groups with pill arrays of string and object (label / value)
  - [ ] Background
  - [ ] Class
  - [ ] Consumable
  - [ ] Container
  - [ ] Equipment
  - [ ] Facility
  - [ ] Feat
  - [ ] Loot
  - [ ] Species
  - [ ] Spell
    - Use the children snippet for spell-specific label-value pair info
  - [ ] Subclass
  - [ ] Tool
  - [ ] Weapon
- [ ] Ensure Activities and Effects tabs include item counters in the title
  - [ ] This will need context-dependent tab titles, if they don't already exist
- [ ] https://discord.com/channels/@me/1243307347682529423/1336210686392668220
- [ ] Add context-dependent Tab visible / enabled predicate option to Tidy tabs, so that concealed content can entirely hide a tab, if needed
- [ ] Handle unidentified feature set
  - [ ] Portrait becomes washed over
  - [ ] Non-description tabs become disabled (preferably, hide them?)
- [ ] Wire up item-sheet-specific user sheet preferences for width and height. Look for other opportunities, also, like container toolbar.
- [ ] Replace rote individual span styles with util styles where able
- [ ] All section configs: pass in callback for preparing sections to view, so that we're not processing this during non-option-sheet renders. It should only render on option sheet prerender.
- [ ] Configure {TabId}: include a hook that allows people to pass in their own settings.
- [ ] SortingListbox - add touch support for drag and drop, if possible; and if it works out, remove the arrow buttons.

### Stretch

- [ ] ButtonWithOptionsPanel - can the menu be outside the hidden window content and still anchor to the position of the menu? Very possible with a Portal. See https://svelte.dev/playground/8364bc976f0c4ff9b83adf6e7a3c19fd?version=5.22.5#H4sIAAAAAAAACp1V34-jNhD-V7zu6gJSBOqu1AcCOV3vpS-V-l6qrgNDcOPYlj1kN0L875VtCOQ2e7vaFwQzH9_8numpZEegGf1LGWSCrmnDBVia_d1TPGuncQK6nnDftE7sCQQ62Y5ZuCWvlESQaGlGc1sZrnFbyhL5USuDpCeVAYYQTJKBNEYdSUmTlFXIlbQl3Szg39VRKwkSZ9xFNJocfxCA5Kg6iVCTgjRMWNiUMk9nF2Ru8SzAe5MwrUnv3krcseqwN6qTdUYsAoid6GATdJrVNZf7jPz6m37xssE92ofp5yMzey5_1Cc6hDeCKiWUychzy_Ft4mtHdGe0gJlx1yEq-TOreXoJT-Y1P5FKMGuLkjKtS-qjztuH7Tet87R9CN8O1lnIljUp-lWj1Gq4_B9iGSkcyeM2IPO0fQw8ac1P3vDbnDtmPseJ_S-8mUo7jPi5L9KASXnjdfmYKCWzSvDqUPRRTIotiebeuBtf42FL-kn8law66T9WJCMr_zZ332ogeRqYty7TwTW6pggvSDM0HQzrN4Zm7OvkP3s9NFfyxdBcBgV5dZgHZNnsslLSIglJ_PfINCmIhGfyJ9NRvCklvHiKppPextXIRVLVsCbcZaKkNTSsE1jSOLRWID7AmRTk6f4-WEjue14PT2EuGxLNdpOW2egA5zgm2Br1TJ7qTgteMYTRO89VUs9Q0sABwsLC-cQCOpI1ca7FHmIAOyNJT2qwaNQ5W-JrEICQ7LisF76snamYDJtSDqW8xO4rOQbtAf0Uxt3P4ujkQapnOUVx3x_gPKYg5KhVFkmxdGsfwggBOHXCpQWDv0OjDIwuyE6IqxCjuNh6sGsBxqX1wJh8-eJNJAaO6gTfWy7qaMrP8LrE-gPFdStyzOfmw8W-maUwha5BozjBFmQUpmxcTyWOZkjxKv_jrhviuRXeAb_uhWBs_PyaRJeqf2wif7wg13N5Q_veSdPvHDOX-BMTHfiy_AFCqAC92Lr71BVzq7b_2D0RfN9ipQwTb92L8UI8bi9Ozbt4Ut9cxoudr68uyLb3QQ_zKl8s6hJzLnWHxI1xFrKTTufg80s8jIvf4cGZ1bDY3PNZub3D_xn-BxsHJbcUCQAA or obsidian dev vault
- [ ] Hightouch: If it's super simple (and only if it's super simple) it could be nice to hard link some of the currency/weight/item type directly to the fields (e.g. click it, opens the tab, focuses the input). But if it's not out-of-the-box it's not worth it. Just wasn't sure if it was actually possible

### To Do Graveyard

- [x] Get Tidy tables working properly and looking nice with the latest styles
  - [x] New quantity control is wider than its 80px parent
  - [x] The table styles do not account for varying column widths and do not constrain child contents
  - [x] Item Name should truncate when too small
  - [x] Section header name should truncate when too small
  - [x] Tighten up actions column scaling for icons
  - [x] Add breakpoints for showing/hiding content, and add columns
    - [x] Charges : order to hide - 4
    - [x] Price : order to hide - 1
    ~~- [ ] Time : order to hide - 2~~
    - [x] Quantity : order to hide - 5
    - [x] Weight : order to hide - 3
  - [x] Finish creating quadrone-specific table components so that inline activities and item (document) summary can be owned by quadrone and classed accordingly.
- [x] Iterate on container tables
  - [x] Container expander to left, always visible. Item Desc / Activity expander on right, hidden until hovered, merely a visual indicator and not a separate clickable area, but always visible when expanded.
    - [x] Inline container contents
    - [x] Item Desc / Activities
  - [x] Add rarity colors to images
- [x] Add user preference sheet width memoization
~~- [ ] Expand/collapse All Sections is not working; fix it so container toggles work with it~~
- [x] Bug: On drop to container sheet, new item is counted but cannot appear until full refresh. Fix: Svelte update.
- [x] Implement filter menu / active button support
- [x] Implement sort button functionality and menu
  - [x] component
  - [x] context data for container
  - [x] sort logic for inventory items
  - [x] consolidate: put all sort-related content in a centralized location for sorting, similar to item filters (the runtime, the default filters, etc.)
  - [x] priority subtitle (include on model as `subtitle` and generically include, instead of using special treatment)
- [x] Implement section config / https://www.figma.com/design/seCsgsf8Uh82uxfPXIwFAg/Tidy5e-Sheet-Refresh?node-id=2182-75324&m=dev
  - [x] Migrate universal quadrone styles from items.scss to apps.scss so that items and options dialogs just work, given the right classes.
  - [x] Code up the section selection form and provide a means for passing in custom options.Depeneding on complexity of available options, consider making it data-driven.
    - [x] Display Options: Show container row (or equivalent preexisting loc key)
  - [x] Apply styles
  - [x] Clean up styles and organize
    - [x] Isolate listbox to its own component
    - [x] Make the options dialog styles specific to tab configuration with a TODO to share styles with other dialogs
- [x] Do DocumentSheet / prepareContext revisions to the core Svelte mixin so that it's more plug and play for all Tidy applications
